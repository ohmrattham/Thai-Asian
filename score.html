<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏£‡∏ß‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Kanit', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to bottom, #f0f4f8, #fff);
      color: #222;
    }

    .container {
      max-width: 600px;
      margin: 40px auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      padding: 32px 24px;
      text-align: center;
    }

    h1 {
      margin-bottom: 24px;
      color: #0f172a;
      font-size: 1.8rem;
    }

    .score-row {
      display: flex;
      justify-content: space-between;
      border-bottom: 1px solid #ddd;
      padding: 12px 0;
      font-size: 18px;
    }

    .score-row:last-child {
      border-bottom: none;
    }

    .total {
      margin-top: 28px;
      font-size: 20px;
      font-weight: bold;
      color: #1e40af;
    }

    .reward, .fail-message {
      margin-top: 20px;
      border-radius: 12px;
      padding: 16px;
      font-size: 1.2rem;
      display: none;
      animation: fadeIn 1s ease-in-out;
    }

    .reward {
      background-color: #d1fae5;
      border: 1px solid #10b981;
      color: #065f46;
    }

    .fail-message {
      background-color: #fee2e2;
      border: 1px solid #ef4444;
      color: #b91c1c;
    }

    button {
      margin-top: 32px;
      padding: 12px 32px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      background: #2563eb;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background: #1e3a8a;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

<div class="container">
  <h1>‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏î‡πà‡∏≤‡∏ô</h1>
  <div id="scoreList"></div>
  <div class="total" id="totalScore">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: 0</div>
  <div class="reward" id="rewardMessage">üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• üéÅ</div>
  <div class="fail-message" id="failMessage">‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à‡∏à‡∏±‡∏á ‡∏Ç‡∏≤‡∏î‡∏≠‡∏µ‡∏Å ... ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
  <button onclick="goBack()">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
</div>

<script>
  const stages = [
    { id: 1, label: "‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 1", key: "score_stage1" },
    { id: 2, label: "‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 2", key: "score_stage2" },
    { id: 3, label: "‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 3", key: "score_stage3" },
    { id: 4, label: "‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 4", key: "score_stage4_total" },
    { id: 5, label: "‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 5", key: "score_stage5" },
    { id: 6, label: "‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 6", key: null }
  ];

  const scoreList = document.getElementById("scoreList");
  const rewardMessage = document.getElementById("rewardMessage");
  const failMessage = document.getElementById("failMessage");
  let total = 0;

  stages.forEach(stage => {
    let score = 0;

    if (stage.id === 6) {
      const buddha = parseFloat(localStorage.getItem("score_buddha")) || 0;
      const naga = parseFloat(localStorage.getItem("score_naga")) || 0;
      const robe = parseFloat(localStorage.getItem("score_robe")) || 0;
      score = buddha + naga + robe;
    } else {
      score = parseFloat(localStorage.getItem(stage.key)) || 0;
    }

    total += score;

    const row = document.createElement("div");
    row.className = "score-row";
    row.innerHTML = `<div>${stage.label}</div><div>${score.toFixed(2)} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>`;
    scoreList.appendChild(row);
  });

  document.getElementById("totalScore").textContent = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ${total.toFixed(2)} / 120`;

  if (total > 110) {
    rewardMessage.style.display = "block";
    failMessage.style.display = "none";
  } else {
    const diff = (110 - total).toFixed(2);
    failMessage.textContent = `‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à‡∏à‡∏±‡∏á ‡∏Ç‡∏≤‡∏î‡∏≠‡∏µ‡∏Å ${diff} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`;
    failMessage.style.display = "block";
    rewardMessage.style.display = "none";
  }

  function goBack() {
    window.location.href = "map.html";
  }
</script>

</body>
</html>
